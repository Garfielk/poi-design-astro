---
import MainLayout from '@/layouts/main.astro';
import ProductCategoryPage from "@/components/page/ProductCategory.tsx"
import type {Language} from "@/i18n/config.ts";

export const prerender = true;

export async function getStaticPaths() {
  const categories = ['motorcycle', 'mountain-bike', 'skiing', 'sports'];
  const languages = [
    { param: undefined, lang: 'en' as Language },
    { param: 'zh-CN', lang: 'zh-CN' as Language },
  ];

  return languages.flatMap(({ param, lang }) =>
    categories.map(category => ({
      params: { lang: param, category },
      props: { lang }
    }))
  );
}

const { lang } = Astro.props as {lang: 'en' | 'zh-CN'};
const { category } = Astro.params;
---

<MainLayout lang={lang}>
  <ProductCategoryPage lang={lang} category={category} client:load />
</MainLayout>
